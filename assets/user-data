#cloud-config

users:
  - name: sumit
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDEU/It+xP85oOUBTHX+BtpLdtXikNoXPjWoq1I1bKjuvtxQP/p8f/dDhqJ0X6j/GqFTZi8asCf6lIpjA8e6OxV0OfKvrsAqEG483Y0EFL/P/RGwwyekBfpprCajE0faFcaBWhdCpIxHXEejnPaVTH7ouv8H8mETmNWRgaZuUo7KKpOWbAgCKuq6SokUZZ3HGHu8z16YXGWrkCTEbEf/QbMIQ5+ETFImyIqWrK3pyuB7Yie+FG4C/KA+3VH55q3NwZc54Yj1e9hYPzVefQEYeRoZBNIVixEd9bhM8jsBJlCutgaMX9ZZgddcdZvxlnoscn/EQ0kRyOy3rX/LRuOnF3RvlbCvZJME80uhwVITKQE2HOEUTedObHxOP6k0P+/dg7RgZfD20upOiNygPNV3X9c/AB3oaUKrCZxtZ1B52b70gPhw02qARmjlrL6VoJnSJo5+IP885b0GxCHOsyH7wvUMltRi62VBMD42VmIFc2qhDQ8nNNIBCunbMB7DubRdXs= guy@guy-laptop
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo
    shell: /bin/bash

write_files:
- encoding: base64
  content: |
    IyEvYmluL2Jhc2gKCiNJbnN0YWxsIEs4UyBjbHVzdGVyCnVudGlsIHN1ZG8ga3ViZWFkbSBpbml0
    IC0tcG9kLW5ldHdvcmstY2lkcj0xMC4yNDQuMC4wLzE2CmRvCiAgICBlY2hvICJFcnJvciB3aGls
    ZSBwdWxsaW5nIGltYWdlcywgdHJ5IGFnYWluLi4uIiAKZG9uZTsKCnVudGlsIHN1ZG8ga3ViZWN0
    bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgdGFpbnQgbm9kZSBteWt1
    YmUgbm9kZS1yb2xlLmt1YmVybmV0ZXMuaW8vY29udHJvbC1wbGFuZS07CmRvCiAgICBlY2hvICJU
    cnkgdW50YWludCBub2RlLi4uIgogICAgc2xlZXAgMQpkb25lOwogCnVudGlsIHN1ZG8ga3ViZWN0
    bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgYXBwbHkgLWYgaHR0cHM6
    Ly9naXRodWIuY29tL2ZsYW5uZWwtaW8vZmxhbm5lbC9yZWxlYXNlcy9sYXRlc3QvZG93bmxvYWQv
    a3ViZS1mbGFubmVsLnltbDsKZG8KICAgIGVjaG8gIlRyeSBpbnN0YWxsIGZsYW5uZWwuLi4iCiAg
    ICBzbGVlcCAxCmRvbmU7CiAKdW50aWwgc3VkbyBrdWJlY3RsIC0ta3ViZWNvbmZpZz0vZXRjL2t1
    YmVybmV0ZXMvYWRtaW4uY29uZiBhcHBseSAtZiBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVu
    dC5jb20va3ViZXJuZXRlcy9kYXNoYm9hcmQvdjIuNy4wL2Fpby9kZXBsb3kvcmVjb21tZW5kZWQu
    eWFtbDsKZG8KICAgIGVjaG8gIlRyeSBpbnN0YWxsIEs4UyBjb25zb2xlLi4uIgogICAgc2xlZXAg
    MQpkb25lOwogCnVudGlsIFsgLWYgL29wdC9jbmkvYmluL2ZsYW5uZWwgXTsKZG8gCiAgICBlY2hv
    ICJXYWl0aW5nIGZvciBmbGFubmVsIGJpbiBjcmVhdGlvbi4uLiI7CiAgICBzbGVlcCAxOwpkb25l
    CnN1ZG8gY3AgL29wdC9jbmkvYmluLyogL3Vzci9saWJleGVjL2NuaS8Kc3VkbyBjcCAvdXNyL2xp
    YmV4ZWMvY25pLyogL29wdC9jbmkvYmluLwogCnN1ZG8ga3ViZWN0bCAtLWt1YmVjb25maWc9L2V0
    Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgcGF0Y2ggc3ZjIGt1YmVybmV0ZXMtZGFzaGJvYXJkIC1u
    IGt1YmVybmV0ZXMtZGFzaGJvYXJkIC0tdHlwZT0nbWVyZ2UnIC1wICd7InNwZWMiOnsidHlwZSI6
    Ik5vZGVQb3J0In19JwpzdWRvIGt1YmVjdGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9h
    ZG1pbi5jb25mIHBhdGNoIHN2YyBrdWJlcm5ldGVzLWRhc2hib2FyZCAtbiBrdWJlcm5ldGVzLWRh
    c2hib2FyZCAtLXR5cGU9J2pzb24nIC1wPSdbeyJvcCI6ICJyZXBsYWNlIiwgInBhdGgiOiAiL3Nw
    ZWMvcG9ydHMvMC9ub2RlUG9ydCIsICJ2YWx1ZSI6IDMxMDAwfV0nCg==
  path: /mnt/k8s-install.sh
  permissions: "0777"

runcmd:
- sudo /mnt/k8s-install.sh