#cloud-config

users:
  - name: sumit
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDEU/It+xP85oOUBTHX+BtpLdtXikNoXPjWoq1I1bKjuvtxQP/p8f/dDhqJ0X6j/GqFTZi8asCf6lIpjA8e6OxV0OfKvrsAqEG483Y0EFL/P/RGwwyekBfpprCajE0faFcaBWhdCpIxHXEejnPaVTH7ouv8H8mETmNWRgaZuUo7KKpOWbAgCKuq6SokUZZ3HGHu8z16YXGWrkCTEbEf/QbMIQ5+ETFImyIqWrK3pyuB7Yie+FG4C/KA+3VH55q3NwZc54Yj1e9hYPzVefQEYeRoZBNIVixEd9bhM8jsBJlCutgaMX9ZZgddcdZvxlnoscn/EQ0kRyOy3rX/LRuOnF3RvlbCvZJME80uhwVITKQE2HOEUTedObHxOP6k0P+/dg7RgZfD20upOiNygPNV3X9c/AB3oaUKrCZxtZ1B52b70gPhw02qARmjlrL6VoJnSJo5+IP885b0GxCHOsyH7wvUMltRi62VBMD42VmIFc2qhDQ8nNNIBCunbMB7DubRdXs= guy@guy-laptop
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo
    shell: /bin/bash

write_files:
- encoding: base64
  content: |
    IyEvYmluL2Jhc2gKCiNJbnN0YWxsIEs4UyBjbHVzdGVyCnN1ZG8ga3ViZWFkbSBpbml0IC0tcG9k
    LW5ldHdvcmstY2lkcj0xMC4yNDQuMC4wLzE2CiAKdW50aWwgc3VkbyBrdWJlY3RsIC0ta3ViZWNv
    bmZpZz0vZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiB0YWludCBub2RlIGhhbDkwMDAgbm9kZS1y
    b2xlLmt1YmVybmV0ZXMuaW8vY29udHJvbC1wbGFuZS07CmRvCiAgICBlY2hvICJUcnkgdW50YWlu
    dCBub2RlLi4uIgogICAgc2xlZXAgMQpkb25lOwogCnVudGlsIHN1ZG8ga3ViZWN0bCAtLWt1YmVj
    b25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYgYXBwbHkgLWYgaHR0cHM6Ly9naXRodWIu
    Y29tL2ZsYW5uZWwtaW8vZmxhbm5lbC9yZWxlYXNlcy9sYXRlc3QvZG93bmxvYWQva3ViZS1mbGFu
    bmVsLnltbDsKZG8KICAgIGVjaG8gIlRyeSBpbnN0YWxsIGZsYW5uZWwuLi4iCiAgICBzbGVlcCAx
    CmRvbmU7CiAKdW50aWwgc3VkbyBrdWJlY3RsIC0ta3ViZWNvbmZpZz0vZXRjL2t1YmVybmV0ZXMv
    YWRtaW4uY29uZiBhcHBseSAtZiBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20va3Vi
    ZXJuZXRlcy9kYXNoYm9hcmQvdjIuNy4wL2Fpby9kZXBsb3kvcmVjb21tZW5kZWQueWFtbDsKZG8K
    ICAgIGVjaG8gIlRyeSBpbnN0YWxsIEs4UyBjb25zb2xlLi4uIgogICAgc2xlZXAgMQpkb25lOwog
    CnVudGlsIFsgLWYgL29wdC9jbmkvYmluL2ZsYW5uZWwgXTsKZG8gCiAgICBlY2hvICJXYWl0aW5n
    IGZvciBmbGFubmVsIGJpbiBjcmVhdGlvbi4uLiI7CiAgICBzbGVlcCAxOwpkb25lCnN1ZG8gY3Ag
    L29wdC9jbmkvYmluLyogL3Vzci9saWJleGVjL2NuaS8Kc3VkbyBjcCAvdXNyL2xpYmV4ZWMvY25p
    LyogL29wdC9jbmkvYmluLwogCnN1ZG8ga3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5l
    dGVzL2FkbWluLmNvbmYgcGF0Y2ggc3ZjIGt1YmVybmV0ZXMtZGFzaGJvYXJkIC1uIGt1YmVybmV0
    ZXMtZGFzaGJvYXJkIC0tdHlwZT0nbWVyZ2UnIC1wICd7InNwZWMiOnsidHlwZSI6Ik5vZGVQb3J0
    In19JwpzdWRvIGt1YmVjdGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25m
    IHBhdGNoIHN2YyBrdWJlcm5ldGVzLWRhc2hib2FyZCAtbiBrdWJlcm5ldGVzLWRhc2hib2FyZCAt
    LXR5cGU9J2pzb24nIC1wPSdbeyJvcCI6ICJyZXBsYWNlIiwgInBhdGgiOiAiL3NwZWMvcG9ydHMv
    MC9ub2RlUG9ydCIsICJ2YWx1ZSI6IDMxMDAwfV0n
  path: /mnt/k8s-install.sh
  permissions: "0777"

runcmd:
- sudo /mnt/k8s-install.sh