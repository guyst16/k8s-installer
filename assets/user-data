#cloud-config

users:
  - name: sumit
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDEU/It+xP85oOUBTHX+BtpLdtXikNoXPjWoq1I1bKjuvtxQP/p8f/dDhqJ0X6j/GqFTZi8asCf6lIpjA8e6OxV0OfKvrsAqEG483Y0EFL/P/RGwwyekBfpprCajE0faFcaBWhdCpIxHXEejnPaVTH7ouv8H8mETmNWRgaZuUo7KKpOWbAgCKuq6SokUZZ3HGHu8z16YXGWrkCTEbEf/QbMIQ5+ETFImyIqWrK3pyuB7Yie+FG4C/KA+3VH55q3NwZc54Yj1e9hYPzVefQEYeRoZBNIVixEd9bhM8jsBJlCutgaMX9ZZgddcdZvxlnoscn/EQ0kRyOy3rX/LRuOnF3RvlbCvZJME80uhwVITKQE2HOEUTedObHxOP6k0P+/dg7RgZfD20upOiNygPNV3X9c/AB3oaUKrCZxtZ1B52b70gPhw02qARmjlrL6VoJnSJo5+IP885b0GxCHOsyH7wvUMltRi62VBMD42VmIFc2qhDQ8nNNIBCunbMB7DubRdXs= guy@guy-laptop
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: sudo
    shell: /bin/bash
    passwd: "$6$umYSAcs//qmYzwRH$g9en2tmzp6h9CHDHaNn.wK2jQtZbIjb8KU8yB.hTvRL.cp2kYuqB9U9Kgj1v9e23CZ8xffD24OLM2u8/PtZ131"

packages:
- podman


write_files:
- encoding: base64
  content: |
    IyEvYmluL2Jhc2gKCiMgU2V0IFNFTGludXggaW4gcGVybWlzc2l2ZSBtb2RlIChlZmZlY3RpdmVs
    eSBkaXNhYmxpbmcgaXQpCnN1ZG8gc2V0ZW5mb3JjZSAwCnN1ZG8gc2VkIC1pICdzL15TRUxJTlVY
    PWVuZm9yY2luZyQvU0VMSU5VWD1wZXJtaXNzaXZlLycgL2V0Yy9zZWxpbnV4L2NvbmZpZwoKIyBU
    aGlzIG92ZXJ3cml0ZXMgYW55IGV4aXN0aW5nIGNvbmZpZ3VyYXRpb24gaW4gL2V0Yy95dW0ucmVw
    b3MuZC9rdWJlcm5ldGVzLnJlcG8KY2F0IDw8RU9GIHwgc3VkbyB0ZWUgL2V0Yy95dW0ucmVwb3Mu
    ZC9rdWJlcm5ldGVzLnJlcG8KW2t1YmVybmV0ZXNdCm5hbWU9S3ViZXJuZXRlcwpiYXNldXJsPWh0
    dHBzOi8vcGtncy5rOHMuaW8vY29yZTovc3RhYmxlOi92MS4yOC9ycG0vCmVuYWJsZWQ9MQpncGdj
    aGVjaz0xCmdwZ2tleT1odHRwczovL3BrZ3MuazhzLmlvL2NvcmU6L3N0YWJsZTovdjEuMjgvcnBt
    L3JlcG9kYXRhL3JlcG9tZC54bWwua2V5CmV4Y2x1ZGU9a3ViZWxldCBrdWJlYWRtIGt1YmVjdGwg
    Y3JpLXRvb2xzIGt1YmVybmV0ZXMtY25pCkVPRgoKI0Rpc2FibGUgc3dhcCAKc3VkbyBkbmYgcmVt
    b3ZlIC15IHpyYW0tZ2VuZXJhdG9yCgpzdWRvIHN3YXBvZmYgLWEKCiNFbmFibGUgbmV0d29yayBw
    YXJhbWV0ZXJzCnN1ZG8gbW9kcHJvYmUgYnJfbmV0ZmlsdGVyCmVjaG8gIm5ldC5pcHY0LmlwX2Zv
    cndhcmQgPSAxIiB8IHN1ZG8gdGVlIC1hIC9ldGMvc3lzY3RsLmNvbmYKc3VkbyBzeXNjdGwgLXAK
    c3VkbyBkbmYgaW5zdGFsbCAteSBpcHJvdXRlLXRjCgoKI0luc3RhbGwga3ViZWxldCwga3ViZWFk
    bSBhbmQga3ViZWN0bCwgYW5kIGVuYWJsZSBrdWJlbGV0IHRvIGVuc3VyZSBpdCdzIGF1dG9tYXRp
    Y2FsbHkgc3RhcnRlZCBvbiBzdGFydHVwOgpzdWRvIHl1bSBpbnN0YWxsIC15IGt1YmVsZXQga3Vi
    ZWFkbSBrdWJlY3RsIC0tZGlzYWJsZWV4Y2x1ZGVzPWt1YmVybmV0ZXMKc3VkbyBzeXN0ZW1jdGwg
    ZW5hYmxlIC0tbm93IGt1YmVsZXQKCiNJbnN0YWxsIGNvbnRhaW5lcmQKc3VkbyB5dW0gaW5zdGFs
    bCAteSBjb250YWluZXJkCnN1ZG8gc3lzdGVtY3RsIGVuYWJsZSAtLW5vdyBjb250YWluZXJkCgpz
    dWRvIHNoIC1jICJjb250YWluZXJkIGNvbmZpZyBkZWZhdWx0ID4gL2V0Yy9jb250YWluZXJkL2Nv
    bmZpZy50b21sIiAKc3VkbyBzZWQgLWkgJ3MvU3lzdGVtZENncm91cCA9IGZhbHNlL1N5c3RlbWRD
    Z3JvdXAgPSB0cnVlLycgIC9ldGMvY29udGFpbmVyZC9jb25maWcudG9tbApzdWRvIHN5c3RlbWN0
    bCByZXN0YXJ0IGNvbnRhaW5lcmQKCiMgI0luc3RhbGwgSzhTIGNsdXN0ZXIKIyBzdWRvIGt1YmVh
    ZG0gaW5pdCAtLXBvZC1uZXR3b3JrLWNpZHI9MTAuMjQ0LjAuMC8xNgoKIyB1bnRpbCBzdWRvIGt1
    YmVjdGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mIHRhaW50IG5vZGUg
    aGFsOTAwMCBub2RlLXJvbGUua3ViZXJuZXRlcy5pby9jb250cm9sLXBsYW5lLTsKIyBkbwojICAg
    ICBlY2hvICJUcnkgdW50YWludCBub2RlLi4uIgojICAgICBzbGVlcCAxCiMgZG9uZTsKCiMgdW50
    aWwgc3VkbyBrdWJlY3RsIC0ta3ViZWNvbmZpZz0vZXRjL2t1YmVybmV0ZXMvYWRtaW4uY29uZiBh
    cHBseSAtZiBodHRwczovL2dpdGh1Yi5jb20vZmxhbm5lbC1pby9mbGFubmVsL3JlbGVhc2VzL2xh
    dGVzdC9kb3dubG9hZC9rdWJlLWZsYW5uZWwueW1sOwojIGRvCiMgICAgIGVjaG8gIlRyeSBpbnN0
    YWxsIGZsYW5uZWwuLi4iCiMgICAgIHNsZWVwIDEKIyBkb25lOwoKIyB1bnRpbCBzdWRvIGt1YmVj
    dGwgLS1rdWJlY29uZmlnPS9ldGMva3ViZXJuZXRlcy9hZG1pbi5jb25mIGFwcGx5IC1mIGh0dHBz
    Oi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9rdWJlcm5ldGVzL2Rhc2hib2FyZC92Mi43LjAv
    YWlvL2RlcGxveS9yZWNvbW1lbmRlZC55YW1sOwojIGRvCiMgICAgIGVjaG8gIlRyeSBpbnN0YWxs
    IEs4UyBjb25zb2xlLi4uIgojICAgICBzbGVlcCAxCiMgZG9uZTsKCiMgdW50aWwgWyAtZiAvb3B0
    L2NuaS9iaW4vZmxhbm5lbCBdOwojIGRvIAojICAgICBlY2hvICJXYWl0aW5nIGZvciBmbGFubmVs
    IGJpbiBjcmVhdGlvbi4uLiI7CiMgICAgIHNsZWVwIDE7CiMgZG9uZQojIHN1ZG8gY3AgL29wdC9j
    bmkvYmluLyogL3Vzci9saWJleGVjL2NuaS8KIyBzdWRvIGNwIC91c3IvbGliZXhlYy9jbmkvKiAv
    b3B0L2NuaS9iaW4vCgojIHN1ZG8ga3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVz
    L2FkbWluLmNvbmYgcGF0Y2ggc3ZjIGt1YmVybmV0ZXMtZGFzaGJvYXJkIC1uIGt1YmVybmV0ZXMt
    ZGFzaGJvYXJkIC0tdHlwZT0nbWVyZ2UnIC1wICd7InNwZWMiOnsidHlwZSI6Ik5vZGVQb3J0In19
    JwojIHN1ZG8ga3ViZWN0bCAtLWt1YmVjb25maWc9L2V0Yy9rdWJlcm5ldGVzL2FkbWluLmNvbmYg
    cGF0Y2ggc3ZjIGt1YmVybmV0ZXMtZGFzaGJvYXJkIC1uIGt1YmVybmV0ZXMtZGFzaGJvYXJkIC0t
    dHlwZT0nanNvbicgLXA9J1t7Im9wIjogInJlcGxhY2UiLCAicGF0aCI6ICIvc3BlYy9wb3J0cy8w
    L25vZGVQb3J0IiwgInZhbHVlIjogMzEwMDB9XSc=
  path: /mnt/install-k8s.sh
  permissions: "0777"

runcmd:
- sudo /mnt/install-k8s.sh